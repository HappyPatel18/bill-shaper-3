<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="./img2/apple-icon-57x57.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="./img2/apple-icon-60x60.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="./img2/apple-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="./img2/apple-icon-76x76.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="./img2/apple-icon-114x114.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="./img2/apple-icon-120x120.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="./img2/apple-icon-144x144.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="./img2/apple-icon-152x152.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="./img2/apple-icon-180x180.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="./img2/android-icon-192x192.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./img2/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="./img2/favicon-96x96.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="./img2/favicon-16x16.png"
    />
    <link rel="manifest" href="./img2/manifest.json" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="msapplication-TileImage" content="./img2/ms-icon-144x144.png" />
    <meta name="theme-color" content="#ffffff" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Poppins:ital,wght@0,400;0,500;0,600;0,700;1,400&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./css/new_style.css" />
    <title>Create an Account</title>
  </head>
  <body>
    <section class="register">
      <div class="container">
        <div class="createAccountBox">
          <div class="socialLogin">
            <a href="#" class="facebook">
              <img src="img2/facebook.svg" alt="Sign up with facebook" />
              Sign up with Facebook
            </a>
            <a href="/auth/google" class="google">
              <img src="img2/google.svg" alt="Sign up with google" />
              Sign up with Google
            </a>
        {{!-- <a href="/auth/google" type="submit" style="text-align:center;"  class="btn btn-primary fb" id="submitbtn">Log In with Google</a> --}}

          </div>
          <div class="or">
            <span>OR</span>
          </div>
          <h1 class="title">Create an account</h1>
          <p class="haveAccount">
            Already have an account? <a href="/login">Login</a>
          </p>
          <form action="/users/register" onsubmit="return checkEmail()" name="registerForm" method="post" class="registerForm">
            <label for="name">What should we call you?</label>
            <input type="text"name="pname" placeholder="Enter your profile name" />
            <label for="email">Whatâ€™s your email?</label>
            <input type="email" name="email" id="email" placeholder="Enter your email address" />
            <div class="passwordLabel">
              <label for="password">Create a password</label>
              <div class="passShowHide">
                <div id="showHide" onclick="passShowHideTogle">
                  <img
                    id="showHideIcon"
                    src="/img2/show.svg"
                    alt="hide password"
                  />
                  <span id="showHideText">Show</span>
                </div>
              </div>
            </div>
            <input
              type="password" name="password"
              placeholder="Enter your password"
              id="password"
            />

            <div class="instruction" id="instruction">
                    <p>Your password must be at least 8 characters long, contain a lowercase letter, an uppercase letter, and a number.</p>

                    <ul class="requerments">
                      <li id="character" class="invalid"> At least 8 characters long</li>
                      <li id="lowercase" class="invalid"> Contains a lowercase letter</li>
                      <li id="uppercase" class="invalid"> Contains an uppercase letter</li>
                      <li id="number" class="invalid"> Contains a number</li>
                    </ul>
            </div><br>

            {{!-- <small
              >Use 8 or more characters with a mix of letters, numbers &
              symbols</small
            > --}}
            <div>
              <p class="terms">
                By creating an account, you agree to the
                <a href="#">Terms of use</a> and <a href="#">Privacy Policy</a>.
              </p>
            </div>
            {{!-- <button type="submit"  id="submitbtn">Get Started</button> --}}
            <button type="submit" class="btn btn-primary disable" id="submitbtn" class="btn">Create an account</button>
          </form>
        </div>
      </div>
    </section>
    <script>
      let password = document.getElementById("password");
      let toggler = document.getElementById("showHide");
      let image = document.getElementById("showHideIcon");
      let text = document.getElementById("showHideText");


      let character = document.getElementById("character");
      let lowercase = document.getElementById("lowercase");
      let uppercase = document.getElementById("uppercase");
      let number = document.getElementById("number");
      let email = document.getElementById("email");
      let btn = document.getElementById("submitbtn");

      password.onfocus = function() {
        
        document.getElementById("instruction").style.display = "block";
        
      }
      password.onblur = function() {
        document.getElementById("instruction").style.display = "none";

      }

      showHidePassword = () => {
        if (password.type == "password") {
          password.setAttribute("type", "text");
          image.setAttribute("src", "/img2/hide.svg");
          text.innerText = "Hide";
        } else {
          image.setAttribute("src", "/img2/show.svg");
          text.innerText = "Show";
          password.setAttribute("type", "password");
        }
      };

            password.onkeyup = function () {
        let lowerCaseLetters = /[a-z]/g;
        let upperCaseLetters = /[A-Z]/g;
        let numbers = /[0-9]/g;
        
        


        if(password.value.match(lowerCaseLetters)) {
          lowercase.classList.remove("invalid");
          lowercase.classList.add("valid");
        } else {
          lowercase.classList.remove("valid");
          lowercase.classList.add("invalid");
        }

        if(password.value.match(upperCaseLetters)) {
          uppercase.classList.remove("invalid");
          uppercase.classList.add("valid");
        } else {
          uppercase.classList.remove("valid");
          uppercase.classList.add("invalid");
        }

        if(password.value.match(numbers)) {
          number.classList.remove("invalid");
          number.classList.add("valid");
        } else {
          number.classList.remove("valid");
          number.classList.add("invalid");
        }
        if(password.value.length >= 8) {
          character.classList.remove("invalid");
          character.classList.add("valid");
        } else {
          character.classList.remove("valid");
          character.classList.add("invalid");
        }
        if(password.value.length >= 8 && password.value.match(lowerCaseLetters) && password.value.match(upperCaseLetters) && password.value.match(numbers)) {
          submitbtn.classList.remove("disable");
        } else {
          submitbtn.classList.add("disable");
        }
      }

      function checkEmail(){
              let email = document.getElementById("email").value;
              console.log(email)
         if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email)){
            return true;
         }else{
          alert('Invalid Email')
          return false;
         }

      }

      toggler.addEventListener("click", showHidePassword);
    </script>
  </body>
</html>
